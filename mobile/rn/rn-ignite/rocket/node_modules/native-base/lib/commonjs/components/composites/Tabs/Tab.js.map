{"version":3,"sources":["Tab.tsx"],"names":["TabContext","Tab","children","isDisabled","style","_active","_disabled","item","props","ref","newProps","inactiveTabStyle","activeTabStyle","state","isFitted","React","useContext","TabsContext","tabRef","useRef","_ref","isHovered","isSelected","selectedKey","key","tabProps","useEffect","disabledKeys","add","delete","tabStyle","_hover","remainingTabStyle","mergedProps","marginalProps","remainingProps","themeTools","extractInObject","undefined","memo","forwardRef"],"mappings":"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","sourcesContent":["import React, { createContext } from 'react';\nimport { Pressable } from '../../primitives/Pressable';\nimport Box from '../../primitives/Box';\nimport { TabsContext } from './Context';\nimport type { ITabProps, ITabsContextProps } from './types';\nimport { omitUndefined } from '../../../theme/tools/utils';\nimport { useTab } from '@react-native-aria/tabs';\nimport { useHover } from '@react-native-aria/interactions';\nimport { mergeRefs } from '../../../utils';\nimport merge from 'lodash.merge';\nimport { themeTools } from '../../../theme';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nexport const TabContext = createContext({});\n\nconst Tab = (\n  {\n    children,\n    isDisabled,\n    style,\n    _active,\n    _disabled,\n    item,\n    ...props\n  }: ITabProps,\n  ref?: any\n) => {\n  const newProps = omitUndefined(props);\n\n  const {\n    inactiveTabStyle,\n    activeTabStyle,\n    state,\n    isFitted,\n  }: ITabsContextProps = React.useContext(TabsContext);\n  let tabRef = React.useRef<any>(null);\n  const _ref = React.useRef(null);\n  const { isHovered } = useHover({}, _ref);\n  let isSelected = state.selectedKey === item.key;\n\n  let { tabProps } = useTab({ item, isDisabled }, state, tabRef);\n\n  React.useEffect(() => {\n    if (isDisabled) {\n      state.disabledKeys.add(item.key);\n    } else {\n      state.disabledKeys.delete(item.key);\n    }\n  }, [isDisabled, item.key, state.disabledKeys]);\n\n  const tabStyle = isSelected ? activeTabStyle : inactiveTabStyle;\n  const { _hover, ...remainingTabStyle } = tabStyle;\n  const mergedProps = merge(remainingTabStyle, newProps);\n  const [\n    marginalProps,\n    remainingProps,\n  ] = themeTools.extractInObject(mergedProps, [\n    'margin',\n    'm',\n    'marginTop',\n    'mt',\n    'marginRight',\n    'mr',\n    'marginBottom',\n    'mb',\n    'marginLeft',\n    'ml',\n    'marginX',\n    'mx',\n    'marginY',\n    'my',\n  ]);\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n  return (\n    <TabContext.Provider\n      value={{\n        isSelected,\n      }}\n    >\n      <Pressable\n        disabled={isDisabled}\n        ref={mergeRefs([tabRef, _ref, ref])}\n        flex={isFitted ? 1 : undefined}\n        {...tabProps}\n        {...marginalProps}\n      >\n        <Box\n          {...remainingProps}\n          {...(isHovered && _hover)}\n          style={[style, isSelected && _active, isDisabled && _disabled]}\n        >\n          {children}\n        </Box>\n      </Pressable>\n    </TabContext.Provider>\n  );\n};\n\nexport default React.memo(React.forwardRef(Tab));\n"]}