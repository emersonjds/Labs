{"version":3,"sources":["Accordion.tsx"],"names":["Accordion","children","index","pIndex","defaultIndex","allowMultiple","allowToggle","onChange","props","ref","endingHeight","startingHeight","duration","isOpen","onAnimationEnd","onAnimationStart","newProps","setIndex","React","useState","changeHandler","isOpening","activeIndex","indexCopy","map","i","push","splice","indexOf","filter","n","AnimationProps","memo","forwardRef"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;;;;;AAEA,MAAMA,SAAS,GAAG,CAChB;AACEC,EAAAA,QADF;AAEEC,EAAAA,KAAK,EAAEC,MAFT;AAGEC,EAAAA,YAHF;AAIEC,EAAAA,aAJF;AAKEC,EAAAA,WALF;AAMEC,EAAAA,QANF;AAOE,KAAGC;AAPL,CADgB,EAUhBC,GAVgB,KAWb;AACH,QAAM;AACJC,IAAAA,YADI;AAEJC,IAAAA,cAFI;AAGJC,IAAAA,QAHI;AAIJC,IAAAA,MAJI;AAKJC,IAAAA,cALI;AAMJC,IAAAA,gBANI;AAOJ,OAAGC;AAPC,MAQF,0BAAc,WAAd,EAA2BR,KAA3B,CARJ;;AAUA,QAAM,CAACN,KAAD,EAAQe,QAAR,IAAoBC,eAAMC,QAAN,CAAehB,MAAM,IAAIC,YAAV,IAA0B,EAAzC,CAA1B,CAXG,CAYH;;;AACA,MAAI,kDAAsBI,KAAtB,CAAJ,EAAkC;AAChC,WAAO,IAAP;AACD;;AACD,QAAMY,aAAa,GAAG,CAACC,SAAD,EAAqBC,WAArB,KAA6C;AACjE,QAAIC,SAAS,GAAGrB,KAAK,CAACsB,GAAN,CAAWC,CAAD,IAAeA,CAAzB,CAAhB;;AACA,QAAInB,WAAJ,EAAiB;AACf,UAAIe,SAAJ,EAAe;AACbE,QAAAA,SAAS,CAACG,IAAV,CAAeJ,WAAf;AACAjB,QAAAA,aAAa,GAAGY,QAAQ,CAACM,SAAD,CAAX,GAAyBN,QAAQ,CAAC,CAACK,WAAD,CAAD,CAA9C;AACD,OAHD,MAGO;AACLL,QAAAA,QAAQ,CAACf,KAAK,CAACyB,MAAN,CAAazB,KAAK,CAAC0B,OAAN,CAAcN,WAAd,CAAb,EAAyC,CAAzC,CAAD,CAAR;AACD;AACF,KAPD,MAOO;AACL,UAAID,SAAJ,EAAe;AACbE,QAAAA,SAAS,CAACG,IAAV,CAAeJ,WAAf;AACAjB,QAAAA,aAAa,GAAGY,QAAQ,CAACM,SAAD,CAAX,GAAyBN,QAAQ,CAAC,CAACK,WAAD,CAAD,CAA9C;AACD,OAHD,MAGO;AACLC,QAAAA,SAAS,GAAGA,SAAS,CAACM,MAAV,CAAkBC,CAAD,IAAYA,CAAC,KAAKR,WAAnC,CAAZ;AACAL,QAAAA,QAAQ,CAACM,SAAD,CAAR;AACD;AACF;;AACDhB,IAAAA,QAAQ,IAAIA,QAAQ,CAACgB,SAAD,CAApB;AACD,GAnBD;;AAoBA,sBACE,6BAAC,yBAAD,CAAkB,QAAlB;AACE,IAAA,KAAK,EAAE;AACLrB,MAAAA,KAAK,EAAEA,KADF;AAELkB,MAAAA,aAFK;AAGLW,MAAAA,cAAc,EAAE;AACdrB,QAAAA,YADc;AAEdC,QAAAA,cAFc;AAGdC,QAAAA,QAHc;AAIdC,QAAAA,MAJc;AAKdC,QAAAA,cALc;AAMdC,QAAAA;AANc;AAHX;AADT,kBAcE,6BAAC,YAAD;AAAK,IAAA,QAAQ,EAAC;AAAd,KAA2BC,QAA3B;AAAqC,IAAA,GAAG,EAAEP;AAA1C,MACG,iCAAmBR,QAAnB,CADH,CAdF,CADF;AAoBD,CAnED;;4BAqEeiB,eAAMc,IAAN,eAAWd,eAAMe,UAAN,CAAiBjC,SAAjB,CAAX,C","sourcesContent":["import React from 'react';\nimport Box from '../../primitives/Box';\nimport type { IAccordionProps } from './types';\nimport { useThemeProps } from '../../../hooks';\nimport getIndexedChildren from '../../../utils/getIndexedChildren';\nimport { AccordionContext } from './Context';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst Accordion = (\n  {\n    children,\n    index: pIndex,\n    defaultIndex,\n    allowMultiple,\n    allowToggle,\n    onChange,\n    ...props\n  }: IAccordionProps,\n  ref: any\n) => {\n  const {\n    endingHeight,\n    startingHeight,\n    duration,\n    isOpen,\n    onAnimationEnd,\n    onAnimationStart,\n    ...newProps\n  } = useThemeProps('Accordion', props);\n\n  const [index, setIndex] = React.useState(pIndex || defaultIndex || []);\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n  const changeHandler = (isOpening: boolean, activeIndex: number) => {\n    let indexCopy = index.map((i: number) => i);\n    if (allowToggle) {\n      if (isOpening) {\n        indexCopy.push(activeIndex);\n        allowMultiple ? setIndex(indexCopy) : setIndex([activeIndex]);\n      } else {\n        setIndex(index.splice(index.indexOf(activeIndex), 1));\n      }\n    } else {\n      if (isOpening) {\n        indexCopy.push(activeIndex);\n        allowMultiple ? setIndex(indexCopy) : setIndex([activeIndex]);\n      } else {\n        indexCopy = indexCopy.filter((n: any) => n !== activeIndex);\n        setIndex(indexCopy);\n      }\n    }\n    onChange && onChange(indexCopy);\n  };\n  return (\n    <AccordionContext.Provider\n      value={{\n        index: index,\n        changeHandler,\n        AnimationProps: {\n          endingHeight,\n          startingHeight,\n          duration,\n          isOpen,\n          onAnimationEnd,\n          onAnimationStart,\n        },\n      }}\n    >\n      <Box overflow=\"hidden\" {...newProps} ref={ref}>\n        {getIndexedChildren(children)}\n      </Box>\n    </AccordionContext.Provider>\n  );\n};\n\nexport default React.memo(React.forwardRef(Accordion));\n"]}