{"version":3,"sources":["Checkbox.web.tsx"],"names":["React","memo","forwardRef","mergeRefs","usePropsResolution","Center","useFormControlContext","Box","useToggleState","VisuallyHidden","CheckboxGroupContext","useHover","useCheckbox","useCheckboxGroupItem","useFocusRing","useHasResponsiveProps","extractInObject","stylingProps","combineContextAndProps","SizedIcon","Stack","wrapStringChild","Checkbox","wrapperRef","isHovered","isHoveredProp","isFocusVisible","isFocusVisibleProp","props","ref","formControlContext","isInvalid","isReadOnly","isIndeterminate","combinedProps","checkboxGroupContext","useContext","state","defaultSelected","defaultIsChecked","isSelected","isChecked","_ref","useRef","mergedRef","inputProps","groupItemInputProps","accessibilityLabel","value","useMemo","checked","disabled","contextCombinedProps","useState","CheckboxComponent","isDisabled","focusProps","icon","_interactionBox","_icon","_stack","_text","resolvedProps","layoutProps","nonLayoutProps","margin","layout","flexbox","position","component","children","mergedWrapperRef"],"mappings":"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","sourcesContent":["import React, { memo, forwardRef } from 'react';\nimport { mergeRefs } from '../../../utils';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport { Center } from '../../composites/Center';\nimport { useFormControlContext } from '../../composites/FormControl';\nimport Box from '../Box';\nimport type { ICheckboxProps } from './types';\nimport { useToggleState } from '@react-stately/toggle';\nimport { VisuallyHidden } from '@react-aria/visually-hidden';\nimport { CheckboxGroupContext } from './CheckboxGroup';\nimport { useHover } from '@react-native-aria/interactions';\nimport { useCheckbox, useCheckboxGroupItem } from '@react-native-aria/checkbox';\nimport { useFocusRing } from '@react-native-aria/focus';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\nimport { extractInObject, stylingProps } from '../../../theme/tools/utils';\nimport { combineContextAndProps } from '../../../utils';\nimport SizedIcon from './SizedIcon';\nimport { Stack } from '../Stack';\nimport { wrapStringChild } from '../../../utils/wrapStringChild';\n\nconst Checkbox = (\n  {\n    wrapperRef,\n    isHovered: isHoveredProp,\n    isFocusVisible: isFocusVisibleProp,\n    ...props\n  }: ICheckboxProps,\n  ref: any\n) => {\n  const formControlContext = useFormControlContext();\n\n  const {\n    isInvalid,\n    isReadOnly,\n    isIndeterminate,\n    ...combinedProps\n  } = combineContextAndProps(formControlContext, props);\n\n  const checkboxGroupContext = React.useContext(CheckboxGroupContext);\n  const state = useToggleState({\n    ...props,\n    defaultSelected: props.defaultIsChecked,\n    isSelected: props.isChecked,\n  });\n\n  const _ref = React.useRef();\n  const mergedRef = mergeRefs([ref, _ref]);\n\n  // Swap hooks depending on whether this checkbox is inside a CheckboxGroup.\n  // This is a bit unorthodox. Typically, hooks cannot be called in a conditional,\n  // but since the checkbox won't move in and out of a group, it should be safe.\n  const { inputProps: groupItemInputProps } = checkboxGroupContext\n    ? // eslint-disable-next-line react-hooks/rules-of-hooks\n      useCheckboxGroupItem(\n        {\n          ...combinedProps,\n          'aria-label': combinedProps.accessibilityLabel,\n          'value': combinedProps.value,\n        },\n        checkboxGroupContext.state,\n        //@ts-ignore\n        mergedRef\n      )\n    : // eslint-disable-next-line react-hooks/rules-of-hooks\n      useCheckbox(\n        {\n          ...combinedProps,\n          'aria-label': combinedProps.accessibilityLabel,\n        },\n        state,\n        //@ts-ignore\n        mergedRef\n      );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const inputProps = React.useMemo(() => groupItemInputProps, [\n    groupItemInputProps.checked,\n    groupItemInputProps.disabled,\n    groupItemInputProps,\n  ]);\n\n  const [contextCombinedProps] = React.useState({\n    ...checkboxGroupContext,\n    ...combinedProps,\n  });\n\n  return (\n    <CheckboxComponent\n      wrapperRef={wrapperRef}\n      mergedRef={mergedRef}\n      inputProps={inputProps}\n      combinedProps={contextCombinedProps}\n      isInvalid={isInvalid}\n      isReadOnly={isReadOnly}\n      isHovered={isHoveredProp}\n      isIndeterminate={isIndeterminate}\n      isFocusVisible={isFocusVisibleProp}\n    />\n  );\n};\n\nconst CheckboxComponent = React.memo(\n  ({\n    wrapperRef,\n    inputProps,\n    combinedProps,\n    isInvalid,\n    isReadOnly,\n    isIndeterminate,\n    mergedRef,\n    isHovered: isHoveredProp,\n    isFocusVisible: isFocusVisibleProp,\n  }: any) => {\n    const _ref = React.useRef();\n    const { isHovered } = useHover({}, _ref);\n\n    const { checked: isChecked, disabled: isDisabled } = inputProps;\n\n    const { focusProps, isFocusVisible } = useFocusRing();\n\n    const {\n      icon,\n      _interactionBox,\n      _icon,\n      _stack,\n      _text,\n      ...resolvedProps\n    } = usePropsResolution('Checkbox', combinedProps, {\n      isInvalid,\n      isReadOnly,\n      isFocusVisible: isFocusVisibleProp || isFocusVisible,\n      isDisabled,\n      isIndeterminate,\n      isChecked,\n      isHovered: isHovered || isHoveredProp,\n    });\n\n    const [layoutProps, nonLayoutProps] = extractInObject(resolvedProps, [\n      ...stylingProps.margin,\n      ...stylingProps.layout,\n      ...stylingProps.flexbox,\n      ...stylingProps.position,\n      '_text',\n    ]);\n    const component = React.useMemo(() => {\n      return (\n        <Stack {..._stack} {...layoutProps}>\n          <Center>\n            {/* Interaction Box */}\n            <Box {..._interactionBox} />\n            {/* Checkbox */}\n            <Center {...nonLayoutProps}>\n              {/* {iconResolver()} */}\n              <SizedIcon icon={icon} _icon={_icon} isChecked={isChecked} />\n            </Center>\n          </Center>\n          {/* Label */}\n          {/* {resolvedProps?.children} */}\n          {wrapStringChild(resolvedProps?.children, _text)}\n        </Stack>\n      );\n    }, [\n      _icon,\n      _stack,\n      _text,\n      _interactionBox,\n      icon,\n      isChecked,\n      nonLayoutProps,\n      layoutProps,\n      resolvedProps?.children,\n    ]);\n\n    const mergedWrapperRef = React.useMemo(\n      () => mergeRefs([wrapperRef, _ref]),\n      [wrapperRef]\n    );\n\n    //TODO: refactor for responsive prop\n    if (useHasResponsiveProps(resolvedProps)) {\n      return null;\n    }\n\n    return (\n      <Box\n        // @ts-ignore - RN web supports accessibilityRole=\"label\"\n        accessibilityRole=\"label\"\n        ref={mergedWrapperRef}\n      >\n        <VisuallyHidden>\n          {/* <input {...props.inputProps} {...props.focusProps} ref={props.mergedRef} /> */}\n          <input {...inputProps} {...focusProps} ref={mergedRef} />\n        </VisuallyHidden>\n\n        {component}\n      </Box>\n    );\n  }\n);\n\nexport default memo(forwardRef(Checkbox));\n"]}