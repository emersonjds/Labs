{"version":3,"sources":["SliderThumb.tsx"],"names":["React","forwardRef","Platform","useSliderThumb","VisuallyHidden","useToken","usePropsResolution","Box","SliderContext","useHasResponsiveProps","useHover","mergeRefs","extractInObject","stylingProps","Stack","Center","SliderThumb","props","ref","isPressed","setIsPressed","useState","isFocused","setIsFocused","handleFocus","focusState","callback","_ref","useRef","isHovered","state","trackLayout","orientation","colorScheme","thumbSize","isReadOnly","isDisabled","_interactionBox","interactionBoxContext","useContext","onFocus","onBlur","_stack","resolvedProps","size","inputRef","thumbProps","inputProps","index","useEffect","isThumbDragging","thumbAbsoluteSize","thumbStyles","bottom","getThumbPercent","undefined","left","transform","translateY","parseInt","translateX","push","scale","scaleOnPressed","layoutProps","nonLayoutProps","margin","layout","flexbox","position","outline","accessibilityProps","nonAccessibilityProps","style","e","children","OS","displayName"],"mappings":"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","sourcesContent":["import React, { forwardRef } from 'react';\nimport { Platform } from 'react-native';\nimport { useSliderThumb } from '@react-native-aria/slider';\nimport { VisuallyHidden } from '@react-aria/visually-hidden';\nimport { useToken } from '../../../hooks';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport type { ISliderThumbProps } from './types';\nimport Box from '../Box';\nimport { SliderContext } from './Context';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\nimport { useHover } from '@react-native-aria/interactions';\nimport { mergeRefs } from '../../../utils';\nimport { extractInObject, stylingProps } from '../../../theme/tools/utils';\nimport { Stack } from '../Stack';\nimport { Center } from '../../composites/Center';\n\nfunction SliderThumb(props: ISliderThumbProps, ref: any) {\n  const [isPressed, setIsPressed] = React.useState(false);\n\n  const [isFocused, setIsFocused] = React.useState(false);\n  const handleFocus = (focusState: boolean, callback: any) => {\n    setIsFocused(focusState);\n    callback();\n  };\n\n  const _ref = React.useRef(null);\n  const { isHovered } = useHover({}, _ref);\n\n  const {\n    state,\n    trackLayout,\n    orientation,\n    colorScheme,\n    thumbSize,\n    isReadOnly,\n    isDisabled,\n    _interactionBox: interactionBoxContext,\n  } = React.useContext(SliderContext);\n  const {\n    onFocus,\n    onBlur,\n    _stack,\n    _interactionBox,\n    ...resolvedProps\n  } = usePropsResolution(\n    'SliderThumb',\n    {\n      size: thumbSize,\n      _interactionBox: interactionBoxContext,\n      colorScheme,\n      ...props,\n    },\n    {\n      isDisabled,\n      isReadOnly,\n      isPressed,\n      isFocused,\n      isHovered,\n    }\n  );\n\n  const inputRef = React.useRef(null);\n  const { thumbProps, inputProps } = useSliderThumb(\n    {\n      index: 0,\n      trackLayout,\n      inputRef,\n      orientation,\n    },\n    state\n  );\n\n  React.useEffect(() => {\n    setIsPressed(state.isThumbDragging(0));\n  }, [state]);\n\n  const thumbAbsoluteSize = useToken('sizes', resolvedProps.size);\n\n  const thumbStyles: any = {\n    bottom:\n      orientation === 'vertical'\n        ? `${state.getThumbPercent(0) * 100}%`\n        : undefined,\n    left:\n      orientation !== 'vertical'\n        ? `${state.getThumbPercent(0) * 100}%`\n        : undefined,\n    transform:\n      orientation === 'vertical'\n        ? [{ translateY: parseInt(thumbAbsoluteSize) / 2 }]\n        : [{ translateX: -parseInt(thumbAbsoluteSize) / 2 }],\n  };\n\n  thumbStyles.transform.push({\n    scale: state.isThumbDragging(0) ? resolvedProps.scaleOnPressed : 1,\n  });\n\n  const [layoutProps, nonLayoutProps] = extractInObject(resolvedProps, [\n    ...stylingProps.margin,\n    ...stylingProps.layout,\n    ...stylingProps.flexbox,\n    ...stylingProps.position,\n    ...stylingProps.outline,\n  ]);\n\n  const [\n    accessibilityProps,\n    nonAccessibilityProps,\n  ] = extractInObject(nonLayoutProps, [\n    'accessibilityRole',\n    'accessibilityState',\n  ]);\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  return (\n    <Box\n      position=\"absolute\"\n      {...thumbProps}\n      {...resolvedProps}\n      {...accessibilityProps}\n      {...layoutProps}\n      style={[thumbStyles, resolvedProps.style]}\n      onFocus={(e: any) => {\n        handleFocus(true, onFocus ? () => onFocus(e) : () => {});\n      }}\n      onBlur={(e: any) => {\n        handleFocus(false, onBlur ? () => onBlur(e) : () => {});\n      }}\n      // {...(isReadOnly && _readOnly)}\n      // {...(isDisabled && _disabled)}\n      ref={mergeRefs([_ref, ref])}\n    >\n      <Stack {..._stack}>\n        <Box {..._interactionBox} />\n        <Center {...nonAccessibilityProps}>\n          {props.children}\n          {Platform.OS === 'web' && (\n            <VisuallyHidden>\n              <input ref={inputRef} {...inputProps} />\n            </VisuallyHidden>\n          )}\n        </Center>\n      </Stack>\n    </Box>\n  );\n}\n\nSliderThumb.displayName = 'SliderThumb';\n\nexport default forwardRef(SliderThumb);\n"]}