{"version":3,"sources":["InputBase.tsx"],"names":["React","memo","forwardRef","TextInput","Platform","useToken","usePropsResolution","useHover","mergeRefs","makeStyledComponent","useResolvedFontFamily","useHasResponsiveProps","StyledInput","InputBase","onKeyPress","onFocus","onBlur","disableFocusHandling","inputProps","wrapperRef","InputLeftElement","InputRightElement","leftElement","rightElement","isHovered","isHoveredProp","isFocused","isFocusedProp","props","ref","passUnresolvedProps","setIsFocused","useState","handleFocus","focusState","callback","inputThemeProps","isDisabled","disabled","isInvalid","accessibilityInvalid","isReadOnly","accessibilityReadOnly","isRequired","required","_ref","useRef","isFullWidth","ariaLabel","accessibilityLabel","placeholderTextColor","selectionColor","underlineColorAndroid","type","fontFamily","fontWeight","fontStyle","_webInputBase","resolvedProps","resolvedFontFamily","resolvedPlaceholderTextColor","resolvedSelectionColor","resolvedUnderlineColorAndroid","undefined","e","persist","OS","cursor"],"mappings":"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","sourcesContent":["import React, { memo, forwardRef } from 'react';\nimport { TextInput, Platform } from 'react-native';\nimport type { IInputProps } from './types';\nimport { useToken } from '../../../hooks';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport { useHover } from '@react-native-aria/interactions';\nimport { mergeRefs } from '../../../utils';\nimport { makeStyledComponent } from '../../../utils/styled';\nimport { useResolvedFontFamily } from '../../../hooks/useResolvedFontFamily';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst StyledInput = makeStyledComponent(TextInput);\n\nconst InputBase = (\n  {\n    onKeyPress,\n    onFocus,\n    onBlur,\n    disableFocusHandling,\n    inputProps,\n    wrapperRef,\n    InputLeftElement,\n    InputRightElement,\n    leftElement,\n    rightElement,\n    isHovered: isHoveredProp,\n    isFocused: isFocusedProp,\n    ...props\n  }: IInputProps & {\n    disableFocusHandling?: boolean;\n    inputProps: any;\n  },\n  ref: any\n) => {\n  let passUnresolvedProps;\n  if (InputLeftElement || InputRightElement || leftElement || rightElement) {\n    passUnresolvedProps = true;\n  }\n\n  const [isFocused, setIsFocused] = React.useState(false);\n  const handleFocus = (focusState: boolean, callback: any) => {\n    !disableFocusHandling && setIsFocused(focusState);\n    callback();\n  };\n\n  const inputThemeProps = {\n    isDisabled: inputProps.disabled,\n    isInvalid: inputProps.accessibilityInvalid,\n    isReadOnly: inputProps.accessibilityReadOnly,\n    isRequired: inputProps.required,\n  };\n\n  const _ref = React.useRef(null);\n  const { isHovered } = useHover({}, _ref);\n\n  const {\n    isFullWidth,\n    isDisabled,\n    isReadOnly,\n    ariaLabel,\n    accessibilityLabel,\n    placeholderTextColor,\n    selectionColor,\n    underlineColorAndroid,\n    type,\n    fontFamily,\n    fontWeight,\n    fontStyle,\n    _webInputBase,\n    ...resolvedProps\n  } = usePropsResolution(\n    'Input',\n    {\n      ...inputThemeProps,\n      ...props,\n    },\n    {\n      isDisabled: inputThemeProps.isDisabled,\n      isHovered: isHoveredProp || isHovered,\n      isFocused: isFocusedProp || isFocused,\n      isInvalid: inputThemeProps.isInvalid,\n      isReadOnly: inputThemeProps.isReadOnly,\n    }\n  );\n\n  const resolvedFontFamily = useResolvedFontFamily({\n    fontFamily,\n    fontWeight: fontWeight ?? 400,\n    fontStyle: fontStyle ?? 'normal',\n  });\n  const resolvedPlaceholderTextColor = useToken('colors', placeholderTextColor);\n  const resolvedSelectionColor = useToken('colors', selectionColor);\n  const resolvedUnderlineColorAndroid = useToken(\n    'colors',\n    underlineColorAndroid\n  );\n  //TODO: refactor for responsive prop\n  if (\n    useHasResponsiveProps({\n      ...props,\n      onKeyPress,\n      onFocus,\n      onBlur,\n      disableFocusHandling,\n      inputProps,\n    })\n  ) {\n    return null;\n  }\n\n  return (\n    <StyledInput\n      {...inputProps}\n      secureTextEntry={type === 'password'}\n      accessible\n      accessibilityLabel={ariaLabel || accessibilityLabel}\n      editable={isDisabled || isReadOnly ? false : true}\n      w={isFullWidth ? '100%' : undefined}\n      {...(passUnresolvedProps ? props : resolvedProps)}\n      {...resolvedFontFamily}\n      placeholderTextColor={resolvedPlaceholderTextColor}\n      selectionColor={resolvedSelectionColor}\n      underlineColorAndroid={resolvedUnderlineColorAndroid}\n      onKeyPress={(e: any) => {\n        e.persist();\n        onKeyPress && onKeyPress(e);\n      }}\n      onFocus={(e: any) => {\n        handleFocus(true, onFocus ? () => onFocus(e) : () => {});\n      }}\n      onBlur={(e: any) => {\n        handleFocus(false, onBlur ? () => onBlur(e) : () => {});\n      }}\n      // TODO: this can be moved to baseStyle using _web\n      {...(Platform.OS === 'web'\n        ? {\n            disabled: isDisabled,\n            cursor: isDisabled ? 'not-allowed' : 'auto',\n          }\n        : {})}\n      ref={mergeRefs([ref, _ref, wrapperRef])}\n      style={Platform.OS === 'web' ? _webInputBase : {}}\n    />\n  );\n};\n\nexport default memo(forwardRef(InputBase));\n"]}